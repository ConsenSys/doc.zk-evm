---
description: How to estimate Linea gas costs
sidebar_position: 6
---

import Tabs from '@theme/Tabs'; import TabItem from '@theme/TabItem';

# Estimate transaction costs

Linea supports the [Ethereum EIP-1559 gas price model](https://ethereum.org/developers/docs/gas); however, being a
layer 2 blockchain, Linea provides a more stable and cost-effective solution for transaction fees.

There are minor differences in the way Linea handles gas calculations to Ethereum:

- The base fee uses a set price of 7 wei. Blocks created by Linea use up to 30 million gas
    (less than 50% of the maximum block size of 61 million gas), the fee decreases by 12.5% per block, effectively
    keeping it at a stable 7 wei.
- Transactions won't be sequenced if the `gasPrice` or `maxPriorityFeePerGas` falls below a certain threshold, which adjusts
    over time. Instead, transactions are added to the pending queue until the gas price on the network drops sufficiently for the
    transactions to be included.

The gas cost to submit your transaction and include it on Ethereum involves the following fee components:

- Layer 2 fee - The L2 fee (execution fee) is the cost to include your transaction on the Linea sequencer and is calculated
    using a similar formula to Ethereum. 
- Layer 1 fee - The L1 fee is the cost to publish your L2 transaction onto Ethereum and can vary based on the size
    of the transaction calldata.

You can [use the `linea_estimateGas`](../reference/api/linea-estimategas.mdx) gas API to estimate your gas costs; the result of the
call provides an estimate that includes the layer 1 and layer 2 fees.

## Calculate transaction fees

Use the [`linea_estimateGas`](../reference/api/linea-estimategas.mdx) API to estimate the gas cost for sending a
transaction. The API will return the recommended gas limit, the base fee per gas, and the priority fee per gas.

:::info important

`linea_estimateGas` uses the same parameters as [`eth_estimateGas`](https://docs.infura.io/api/networks/linea/json-rpc-methods/eth_estimategas),
however we recommend using `linea_estimateGas` for more accurate results.

:::

The following example executes the `linea_estimateGas` API on the Goerli testnet.

<Tabs className="my-tabs">
  <TabItem value="curl" label="curl" default>

```bash
curl -X POST --data '{"jsonrpc": "2.0","method": "linea_estimateGas","params": [{"from": "0xFE3B557E8Fb62b89F4916B721be55cEb828dBd73","value": "0x1","gasPrice":"0x100000000","gas":"0x21000"}],"id": 53}' https://rpc.goerli.linea.build
```

</TabItem>
<TabItem value="result" label="Result">

```bash
{
  "jsonrpc": "2.0",
  "id": 53,
  "result": {
    "baseFeePerGas": "0x7",
    "gasLimit": "0xcf08",
    "priorityFeePerGas": "0x43a82a4"
  }
}
```

  </TabItem>
</Tabs>

:::note

The result of the request returns hexadecimal equivalent integers of gas prices in wei. Convert the hexadecimal value into
decimals to get the wei value. You can use any hexadecimal to decimal converter such as
[RapidTables](https://www.rapidtables.com/convert/number/hex-to-decimal.html).

:::

### Formula

The `linea_estimateGas` API calculates gas fees as follows:

- `baseFeePerGas` - Uses the Linea base fee which is static at 7 wei.
- `gasLimit` - Uses the standard `eth_estimateGas` API calculation.
- `priorityFeePerGas` - Uses the following formula:

    ```bash
    priorityFeePerGas = L2_compressed_tx_size_in_bytes * L1_VERIFICATION_COST * L2_minimum_minable_gas_price * L1_L2_GAS_PRICE_RATIO * MINIMUM_MARGIN_ESTIMATE_GAS / (L2_tx_gas_used * L1_VERIFICATION_CAPACITY)
    ```

    With the following assumptions:

    - `L2_compressed_tx_size_in_bytes`: This is the size of the transaction data after it has been compressed using the
        `gnarkCompression` function (the ZK compression library used by Linea). It's calculated by taking the size of the
        RLP-encoded transaction data, subtracting the sizes of certain components (32 bytes for the signature, 32 bytes
        for the transaction type, 1 byte for the chain ID, and adding 20 bytes for the sender's address).

    - `L1_VERIFICATION_COST`: The cost of verifying the transaction on the Ethereum network. It's currently set at
        1.2 million gas.

    - `L1_VERIFICATION_CAPACITY`: The maximum amount of data that can be verified in a single block on the Ethereum network.
        It's currently set at 90 kilobytes (kB).

    - `L1_L2_GAS_PRICE_RATIO`: The ratio of the gas price on the Ethereum network to the gas price on the Linea network.
        It's currently set at 15 for the testnet and 12 for the mainnet.

    - `MINIMUM_MARGIN_ESTIMATE_GAS`: The factor used to ensure that the estimated gas price includes a margin of error.
        It's currently set at 1.0.